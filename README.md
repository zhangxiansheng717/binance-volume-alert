# å¸å®‰åˆçº¦äº¤æ˜“é‡ç›‘æ§æœºå™¨äºº

ä¸€ä¸ªç”¨äºç›‘æ§å¸å®‰åˆçº¦å¸‚åœºäº¤æ˜“é‡å’Œä»·æ ¼å˜åŒ–çš„æœ¬åœ°æœºå™¨äººï¼Œå½“å‘ç°äº¤æ˜“é‡æš´æ¶¨ä¸”ä»·æ ¼ä¸Šæ¶¨æ—¶ï¼Œé€šè¿‡ Telegram å‘é€æé†’ã€‚

# è·å– Telegram é…ç½®åŠå®Œæ•´éƒ¨ç½²æµç¨‹

## å¦‚ä½•è·å– Telegram é…ç½®

### æ­¥éª¤1ï¼šåˆ›å»º Telegram Bot å¹¶è·å– Token

1. æ‰“å¼€ Telegramï¼Œæœç´¢ **@BotFather**
2. å‘é€å‘½ä»¤ `/newbot`
3. æŒ‰æç¤ºæ“ä½œï¼š

 * ç»™ä½ çš„æœºå™¨äººèµ·ä¸ªåå­—ï¼š`Binance Monitor Bot`
 * ç»™æœºå™¨äººè®¾ç½®ç”¨æˆ·åï¼ˆå¿…é¡»ä»¥`bot`ç»“å°¾ï¼‰ï¼š`binance_alert_bot`

4. åˆ›å»ºæˆåŠŸåï¼ŒBotFather ä¼šç»™ä½ ä¸€ä¸ª Tokenï¼Œç±»ä¼¼ï¼š
   `1234567888:ABCdefGHIjklMNOpqrsTUVwxyz`
    è¿™å°±æ˜¯ä½ çš„ **`TELEGRAM_BOT_TOKEN`** âœ…

### æ­¥éª¤2ï¼šè·å–ä½ çš„ Chat ID

1. åœ¨ Telegram æœç´¢ **@userinfobot**
2. ç‚¹å‡» **START** æˆ–å‘é€ä»»æ„æ¶ˆæ¯
3. æœºå™¨äººä¼šå›å¤ä½ çš„ä¿¡æ¯ï¼Œæ‰¾åˆ° `Id:` åé¢çš„æ•°å­—ï¼Œä¾‹å¦‚ï¼š
   `Id: 123456789`
    è¿™å°±æ˜¯ä½ çš„ **`TELEGRAM_CHAT_ID`** âœ…

### æ­¥éª¤3ï¼šè®©ä½ çš„ Bot èƒ½ç»™ä½ å‘æ¶ˆæ¯

1. åœ¨ Telegram æœç´¢ä½ åˆšæ‰åˆ›å»ºçš„æœºå™¨äººï¼ˆä¾‹å¦‚ `@binance_alert_bot`ï¼‰
2. ç‚¹å‡» **START** æŒ‰é’®
3. ç°åœ¨æœºå™¨äººå°±å¯ä»¥ç»™ä½ å‘æ¶ˆæ¯äº†ï¼

---

### Telegram é…ç½®ç¤ºä¾‹:

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUuwxyz
TELEGRAM_CHAT_ID=123456789
USE_PROXY=false
```

### ä½¿ç”¨åœºæ™¯

**åœºæ™¯1ï¼šä¸ªäººä½¿ç”¨ï¼ˆæœ€å¸¸è§ï¼‰** â­

```env
TELEGRAM_BOT_TOKEN=1234567890:ABC...
TELEGRAM_CHAT_ID=123456789  # â† ä½ çš„ä¸ªäººChat ID
```

**åœºæ™¯2ï¼šå‘é€åˆ°ç¾¤ç»„**

```env
TELEGRAM_BOT_TOKEN=1234567890:ABC...
TELEGRAM_CHAT_ID=-1001234567890  # â† ç¾¤ç»„çš„Chat IDï¼ˆè´Ÿæ•°ï¼‰```
**æ­¥éª¤ï¼š**
1. åˆ›å»ºä¸€ä¸ª Telegram ç¾¤ç»„ã€‚
2. æŠŠæœºå™¨äººæ‹‰è¿›ç¾¤ç»„ã€‚
3. è·å–ç¾¤ç»„çš„ Chat IDï¼ˆè´Ÿæ•°ï¼Œå¦‚ `-1001234567890`ï¼‰ã€‚
4. é…ç½®åˆ° `.env` æ–‡ä»¶ã€‚

**å¦‚ä½•è·å–ç¾¤ç»„Chat IDï¼š**
ä½¿ç”¨ **@username_to_id_bot**
1. æŠŠè¿™ä¸ªæœºå™¨äººæ‹‰è¿›ä½ çš„ç¾¤ç»„ã€‚
2. å®ƒä¼šè‡ªåŠ¨å‘é€ç¾¤ç»„çš„ IDã€‚

---

## å®Œæ•´éƒ¨ç½²æµç¨‹ï¼ˆé€‚åˆæµ·å¤–æœåŠ¡å™¨ï¼‰

### 1. å‡†å¤‡ç¯å¢ƒ

*   **æ›´æ–°ç³»ç»Ÿ**
    ```bash
    sudo apt update && sudo apt upgrade -y (åŸºæœ¬ç”¨ä¸åˆ°ï¼Œç›´æ¥è·³è¿‡)
```

* **å®‰è£… Node.js 18.x**

  ```bash
  curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
  sudo apt install -y nodejs
  ```

* **å®‰è£… git å’Œ PM2**

  ```bash
  sudo apt install git -y
  sudo npm install pm2 -g
  ```

* **éªŒè¯å®‰è£…**

  ```bash
  node -v    # åº”è¯¥æ˜¾ç¤º v18.x.x
  npm -v     # åº”è¯¥æ˜¾ç¤º 9.x.x æˆ–æ›´é«˜
  pm2 -v     # åº”è¯¥æ˜¾ç¤ºç‰ˆæœ¬å·
  ```

### 2. å…‹éš†å¹¶é…ç½®é¡¹ç›®

* **åˆ›å»ºé¡¹ç›®ç›®å½•**

  ```bash
  mkdir -p /home/ubuntu/projects
  cd /home/ubuntu/projects
  ```

* **å…‹éš†é¡¹ç›®ï¼ˆä½¿ç”¨ä½ çš„å®é™…Gitåœ°å€ï¼‰**

  ```bash
  git clone https://github.com/yourusername/binance-volume-alert.git
  cd binance-volume-alert
  ```

* **å®‰è£…ä¾èµ–**

  ```bash
  npm install
  ```

* **å¤åˆ¶é…ç½®æ–‡ä»¶**

  ```bash
  cp .env.example .env
  ```

* **ç¼–è¾‘é…ç½®æ–‡ä»¶**

  ```bash
  nano .env
  ```

### 3. æµ‹è¯•é…ç½®

* **æµ‹è¯• Telegram é…ç½®æ˜¯å¦æ­£ç¡®**

  ```bash
  node test-telegram.js
  ```

  å¦‚æœé…ç½®æ­£ç¡®ï¼Œä½ ä¼šï¼š

  *   æ§åˆ¶å°æ˜¾ç¤ºï¼š`æµ‹è¯•æˆåŠŸï¼`
  *   Telegram æ”¶åˆ°æµ‹è¯•æ¶ˆæ¯ âœ…

  å¦‚æœå‡ºé”™ï¼Œæ£€æŸ¥ï¼š

  *   Token æ˜¯å¦æ­£ç¡®ï¼ˆæ²¡æœ‰å¤šä½™ç©ºæ ¼ï¼‰
  *   Chat ID æ˜¯å¦æ­£ç¡®
  *   æ˜¯å¦ç‚¹å‡»äº†æœºå™¨äººçš„ **START** æŒ‰é’®

### 4. å¯åŠ¨æœåŠ¡

* **å¯åŠ¨ç›‘æ§æœåŠ¡**

  ```bash
  pm2 start src/index.js --name "binance-monitor"
  ```

* **æŸ¥çœ‹æ—¥å¿—ï¼ˆç¡®è®¤æ­£å¸¸è¿è¡Œï¼‰**

  ```bash
  pm2 logs binance-monitor
  ```

  å¦‚æœæ­£å¸¸ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

  ```
  â° å¼€å§‹æ–°ä¸€è½®15åˆ†é’Ÿå‘¨æœŸå¸‚åœºæ£€æŸ¥...
  ğŸ“Š 15åˆ†é’Ÿå‘¨æœŸè·å–åˆ° 280 ä¸ªäº¤æ˜“å¯¹ï¼Œæœ‰æ•ˆæ•°æ® 275 ä¸ª
  ```

### 5. è®¾ç½®å¼€æœºè‡ªå¯

* **ä¿å­˜å½“å‰PM2è¿›ç¨‹åˆ—è¡¨**

  ```bash
  pm2 save
  ```

* **ç”Ÿæˆå¼€æœºè‡ªå¯åŠ¨è„šæœ¬**

  ```bash
  pm2 startup
  ```

* **å¤åˆ¶å¹¶æ‰§è¡Œè¾“å‡ºçš„å‘½ä»¤ï¼ˆç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼‰**

  ```bash
  sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u ubuntu --hp /home/ubuntu
  ```

### 6. å¸¸ç”¨ç®¡ç†å‘½ä»¤

* **æŸ¥çœ‹è¿è¡ŒçŠ¶æ€**

  ```bash
  pm2 status
  ```

* **æŸ¥çœ‹å®æ—¶æ—¥å¿—**

  ```bash
  pm2 logs binance-monitor
  ```

* **æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—**

  ```bash
  pm2 logs binance-monitor --lines 100
  ```

* **åœæ­¢æœåŠ¡**

  ```bash
  pm2 stop binance-monitor
  ```

* **é‡å¯æœåŠ¡**

  ```bash
  pm2 restart binance-monitor
  ```

* **åˆ é™¤æœåŠ¡**

  ```bash
  pm2 delete binance-monitor
  ```

* **æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯**

  ```bash
  pm2 show binance-monitor
  ```

---

## æ‰‹åŠ¨æ›´æ–°æµç¨‹

å¦‚æœä»¥åéœ€è¦æ›´æ–°ä»£ç ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/ubuntu/projects/binance-volume-alert

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin master

# 3. å®‰è£…å¯èƒ½æ–°å¢çš„ä¾èµ–
npm install

# 4. é‡å¯æœåŠ¡ä»¥åº”ç”¨æ›´æ–°
pm2 restart binance-monitor
```
## åŠŸèƒ½ç‰¹ç‚¹

- å®æ—¶ç›‘æ§å¸å®‰åˆçº¦å¸‚åœºæ‰€æœ‰ USDT äº¤æ˜“å¯¹
- **å¤šæ—¶é—´å‘¨æœŸç›‘æ§**ï¼šæ”¯æŒ 5åˆ†é’Ÿã€15åˆ†é’Ÿã€1å°æ—¶ã€4å°æ—¶ã€1æ—¥ ç­‰å¤šä¸ªæ—¶é—´å‘¨æœŸ
- æ™ºèƒ½è°ƒåº¦ï¼šä¸åŒæ—¶é—´å‘¨æœŸåœ¨ä¸åŒæ—¶é—´ç‚¹æ£€æŸ¥ï¼Œé¿å…APIé™åˆ¶
- å½“ç¬¦åˆä»¥ä¸‹æ¡ä»¶æ—¶å‘é€ Telegram æé†’ï¼š
  - å½“å‰å‘¨æœŸäº¤æ˜“é‡æ¯”å†å²å¹³å‡äº¤æ˜“é‡å¢åŠ æŒ‡å®šå€æ•°ä»¥ä¸Š
  - ä»·æ ¼æ¯”ä¸Šä¸€æ¬¡æ£€æŸ¥æ—¶ä¸Šæ¶¨æŒ‡å®šç™¾åˆ†æ¯”ä»¥ä¸Š
  - æˆäº¤é¢è¶…è¿‡æŒ‡å®š USDT é‡‘é¢
- æ˜¾ç¤ºè¯¦ç»†çš„æˆäº¤é¢ã€ä»·æ ¼å˜åŒ–ä¿¡æ¯ï¼ŒåŒºåˆ†ä¸åŒæ—¶é—´å‘¨æœŸ
- æ”¯æŒé€šè¿‡ä»£ç†è®¿é—®å¸å®‰ API å’Œ Telegram
- çµæ´»é…ç½®ï¼šå¯é€šè¿‡ç¯å¢ƒå˜é‡å¼€å¯/å…³é—­ç‰¹å®šæ—¶é—´å‘¨æœŸ
- å‘åå…¼å®¹ï¼šæ”¯æŒåŸæœ‰çš„å•ä¸€æ—¶é—´å‘¨æœŸæ¨¡å¼

## ç›‘æ§é€»è¾‘è¯´æ˜

### å¤šæ—¶é—´å‘¨æœŸç›‘æ§

1. **æ”¯æŒçš„æ—¶é—´å‘¨æœŸ**
   - **5åˆ†é’Ÿ**ï¼šæ¯5åˆ†é’Ÿå‘¨æœŸç¬¬3ç§’æ£€æŸ¥ï¼ŒåŸºå‡†æœŸ30åˆ†é’Ÿï¼ˆ6ä¸ªå‘¨æœŸï¼‰
   - **15åˆ†é’Ÿ**ï¼šæ¯15åˆ†é’Ÿå‘¨æœŸç¬¬10ç§’æ£€æŸ¥ï¼ŒåŸºå‡†æœŸ90åˆ†é’Ÿï¼ˆ6ä¸ªå‘¨æœŸï¼‰
   - **1å°æ—¶**ï¼šæ¯å°æ—¶ç¬¬30ç§’æ£€æŸ¥ï¼ŒåŸºå‡†æœŸ6å°æ—¶ï¼ˆ6ä¸ªå‘¨æœŸï¼‰
   - **4å°æ—¶**ï¼šæ¯4å°æ—¶ç¬¬2åˆ†é’Ÿæ£€æŸ¥ï¼ŒåŸºå‡†æœŸ24å°æ—¶ï¼ˆ6ä¸ªå‘¨æœŸï¼‰
   - **1æ—¥**ï¼šæ¯æ—¥ç¬¬5åˆ†é’Ÿæ£€æŸ¥ï¼ŒåŸºå‡†æœŸ6å¤©ï¼ˆ6ä¸ªå‘¨æœŸï¼‰

2. **äº¤æ˜“é‡è®¡ç®—é€»è¾‘**
   - ä½¿ç”¨å¯¹åº”æ—¶é—´å‘¨æœŸKçº¿çš„å¸ç§äº¤æ˜“é‡ï¼ˆè€Œä¸æ˜¯USDTæˆäº¤é¢ï¼‰
   - å½“å‰äº¤æ˜“é‡ï¼šæœ€æ–°å·²å®Œæˆçš„Kçº¿çš„å¸ç§äº¤æ˜“é‡ï¼ˆå®Œæ•´æ•°æ®ï¼‰
   - åŸºå‡†äº¤æ˜“é‡ï¼šå‰6æ ¹åŒå‘¨æœŸKçº¿çš„å¹³å‡å¸ç§äº¤æ˜“é‡
   - æˆäº¤é¢ï¼ˆUSDTï¼‰ä»…ç”¨äºæœ€å°äº¤æ˜“é¢ç­›é€‰

3. **é¢„è­¦æ¡ä»¶ï¼ˆæ¯ä¸ªæ—¶é—´å‘¨æœŸç‹¬ç«‹é…ç½®ï¼‰**
   - äº¤æ˜“é‡å€æ•° = æœ€æ–°å®Œæ•´å‘¨æœŸå¸ç§äº¤æ˜“é‡ Ã· å†å²å¹³å‡å¸ç§äº¤æ˜“é‡
   - å½“äº¤æ˜“é‡å€æ•°è¶…è¿‡è®¾å®šé˜ˆå€¼ï¼ˆå„å‘¨æœŸå¯ç‹¬ç«‹é…ç½®ï¼‰
   - ä¸”ä»·æ ¼ä¸Šæ¶¨è¶…è¿‡æœ€å°æ¶¨å¹…ï¼ˆæ‰€æœ‰å‘¨æœŸå…±ç”¨ï¼Œé»˜è®¤0.1%ï¼‰
   - ä¸”æˆäº¤é¢è¶…è¿‡æœ€å°é™åˆ¶ï¼ˆå„å‘¨æœŸå¯ç‹¬ç«‹é…ç½®ï¼‰

4. **é»˜è®¤é…ç½®**
   - 5åˆ†é’Ÿï¼šäº¤æ˜“é‡é˜ˆå€¼2å€ï¼Œæœ€å°æˆäº¤é¢10ä¸‡USDT
   - 15åˆ†é’Ÿï¼šäº¤æ˜“é‡é˜ˆå€¼2.5å€ï¼Œæœ€å°æˆäº¤é¢30ä¸‡USDT
   - 1å°æ—¶ï¼šäº¤æ˜“é‡é˜ˆå€¼3å€ï¼Œæœ€å°æˆäº¤é¢100ä¸‡USDT
   - 4å°æ—¶ï¼šäº¤æ˜“é‡é˜ˆå€¼4å€ï¼Œæœ€å°æˆäº¤é¢500ä¸‡USDT
   - 1æ—¥ï¼šäº¤æ˜“é‡é˜ˆå€¼5å€ï¼Œæœ€å°æˆäº¤é¢1000ä¸‡USDT

5. **æ˜¾ç¤ºä¿¡æ¯**
   - æ¯ä¸ªæ—¶é—´å‘¨æœŸç‹¬ç«‹æ˜¾ç¤ºæœ€è¿‘3ä¸ªäº¤æ˜“å¯¹çš„è¯¦ç»†æ•°æ®
   - åŒ…å«æ—¶é—´å‘¨æœŸæ ‡è¯†ã€äº¤æ˜“é‡å˜åŒ–å€æ•°ã€ä»·æ ¼ä¿¡æ¯ç­‰

6. **Telegram æé†’æ ¼å¼**
```
ğŸš¨ äº¤æ˜“é‡æš´æ¶¨æé†’

å¸ç§ï¼šBTCUSDT (1å°æ—¶)
å½“å‰ä»·æ ¼ï¼š48000 USDT
ä»·æ ¼å˜åŒ–ï¼š+1.5%
1å°æ—¶äº¤æ˜“é‡å˜åŒ–ï¼š3.2å€
1å°æ—¶æˆäº¤é¢ï¼š1500000 USDT

â° 2024-02-12 15:30:00
```

## å¿«é€Ÿå¼€å§‹

### æœ¬åœ°è¿è¡Œ
1. ç¡®ä¿ä½ çš„ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š
   - Node.js 18.x æˆ–ä»¥ä¸Šç‰ˆæœ¬
   - npmï¼ˆé€šå¸¸éš Node.js ä¸€èµ·å®‰è£…ï¼‰
   - å¦‚æœåœ¨ä¸­å›½å¤§é™†ä½¿ç”¨ï¼Œéœ€è¦å‡†å¤‡ä»£ç†

2. å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–ï¼š
```bash
git clone [é¡¹ç›®åœ°å€]
cd binance-volume-alert
npm install
```

3. é…ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„é…ç½®
# Windows: notepad .env
# Mac/Linux: nano .env æˆ– vim .env
```

4. é…ç½®è¯´æ˜ï¼š
```env
# Telegramé…ç½®ï¼ˆå¿…éœ€ï¼‰
TELEGRAM_BOT_TOKEN=ä½ çš„æœºå™¨äººToken
TELEGRAM_CHAT_ID=ä½ çš„èŠå¤©ID

# å¦‚æœåœ¨ä¸­å›½å¤§é™†ä½¿ç”¨ï¼Œéœ€è¦é…ç½®ä»£ç†
USE_PROXY=true
PROXY_HOST=127.0.0.1
PROXY_PORT=10809

# ========== å¤šæ—¶é—´å‘¨æœŸç›‘æ§é…ç½® ==========
# æ˜¯å¦å¯ç”¨å¤šæ—¶é—´å‘¨æœŸç›‘æ§ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
ENABLE_MULTI_TIMEFRAME=true

# å„æ—¶é—´å‘¨æœŸçš„å¼€å…³ï¼ˆé»˜è®¤å…¨éƒ¨å¯ç”¨ï¼‰
ENABLE_15M=true
ENABLE_1H=true
ENABLE_4H=true
ENABLE_1D=true

# ========== å„æ—¶é—´å‘¨æœŸç‹¬ç«‹é…ç½® ==========
# 5åˆ†é’Ÿå‘¨æœŸ
VOLUME_THRESHOLD_5M=2
MIN_QUOTE_VOLUME_5M=100000

# 15åˆ†é’Ÿå‘¨æœŸ
VOLUME_THRESHOLD_15M=2.5
MIN_QUOTE_VOLUME_15M=300000

# 1å°æ—¶å‘¨æœŸ
VOLUME_THRESHOLD_1H=3
MIN_QUOTE_VOLUME_1H=1000000

# 4å°æ—¶å‘¨æœŸ
VOLUME_THRESHOLD_4H=4
MIN_QUOTE_VOLUME_4H=5000000

# 1æ—¥å‘¨æœŸ
VOLUME_THRESHOLD_1D=5
MIN_QUOTE_VOLUME_1D=10000000

# ========== é€šç”¨é…ç½® ==========
MIN_PRICE_CHANGE=0.1     # æœ€å°ä»·æ ¼å˜åŒ–ç™¾åˆ†æ¯”ï¼ˆæ‰€æœ‰å‘¨æœŸå…±ç”¨ï¼‰

# ========== å‘åå…¼å®¹é…ç½®ï¼ˆå•ä¸€æ—¶é—´å‘¨æœŸæ¨¡å¼ï¼‰ ==========
# å½“ ENABLE_MULTI_TIMEFRAME=false æ—¶ä½¿ç”¨
VOLUME_THRESHOLD=2
MIN_QUOTE_VOLUME=100000
CHECK_INTERVAL=60000
```

> **æ³¨æ„**: ç¨‹åºä½¿ç”¨å›ºå®šçš„5åˆ†é’Ÿæ£€æŸ¥å‘¨æœŸï¼Œè¿™æ˜¯ä¸ºäº†é…åˆå¸å®‰5åˆ†é’ŸKçº¿æ•°æ®çš„æ›´æ–°å‘¨æœŸã€‚æ¯æ¬¡æ£€æŸ¥éƒ½ä¼šè‡ªåŠ¨å¯¹é½åˆ°ä¸‹ä¸€ä¸ª5åˆ†é’Ÿå‘¨æœŸçš„ç¬¬3ç§’ï¼Œä»¥ç¡®ä¿è·å–åˆ°å®Œæ•´çš„Kçº¿æ•°æ®ã€‚

5. æµ‹è¯•é…ç½®ï¼š
```bash
# æµ‹è¯• Telegram é…ç½®æ˜¯å¦æ­£ç¡®
node test-telegram.js
```

6. è¿è¡Œæ–¹å¼ï¼š

æ–¹å¼ä¸€ï¼šç›´æ¥è¿è¡Œï¼ˆé€‚åˆæµ‹è¯•ï¼‰
```bash
# ä½¿ç”¨ node ç›´æ¥è¿è¡Œ
node src/index.js

# æˆ–ä½¿ç”¨ npm script
npm start
```

æ–¹å¼äºŒï¼šåå°è¿è¡Œï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼‰
```bash
# å…¨å±€å®‰è£… PM2
npm install pm2 -g

# ä½¿ç”¨ PM2 å¯åŠ¨æœåŠ¡
pm2 start src/index.js --name "binance-monitor"

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs binance-monitor

# åœæ­¢æœåŠ¡
pm2 stop binance-monitor

# é‡å¯æœåŠ¡
pm2 restart binance-monitor
```

7. å¸¸è§é—®é¢˜ï¼š
- å¦‚æœæç¤º "Error: connect ETIMEDOUT"ï¼Œæ£€æŸ¥ä»£ç†é…ç½®
- å¦‚æœ Telegram æµ‹è¯•å¤±è´¥ï¼Œæ£€æŸ¥ Token å’Œ Chat ID æ˜¯å¦æ­£ç¡®
- å¦‚æœéœ€è¦æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Œå¯ä»¥æŸ¥çœ‹ `logs` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶

## å®‰è£…éƒ¨ç½²

### æœ¬åœ°å¼€å‘ç¯å¢ƒ
1. å…‹éš†é¡¹ç›®å¹¶å®‰è£…ä¾èµ–ï¼š
```bash
git clone [é¡¹ç›®åœ°å€]
cd binance-volume-alert
npm install
```

2. é…ç½®ç¯å¢ƒå˜é‡ï¼š
   å¤åˆ¶ `.env.example` æ–‡ä»¶å¹¶é‡å‘½åä¸º `.env`ï¼š
```bash
cp .env.example .env
```
   ç„¶åç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„é…ç½®ã€‚

### æœåŠ¡å™¨éƒ¨ç½²
1. å‡†å¤‡ç¯å¢ƒï¼š
```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£… Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# å®‰è£… git å’Œ PM2
sudo apt install git
sudo npm install pm2 -g
```

2. éƒ¨ç½²é¡¹ç›®ï¼š
```bash
# å…‹éš†é¡¹ç›®
cd /home/ubuntu/projects
git clone [é¡¹ç›®åœ°å€]
cd binance-volume-alert

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒ
cp .env.example .env
nano .env

# å¯åŠ¨æœåŠ¡
pm2 start src/index.js --name "binance-monitor"
pm2 start src/update.js --name "auto-updater"

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

### CentOS ç³»ç»Ÿéƒ¨ç½²
1. å‡†å¤‡ç¯å¢ƒï¼š
```bash
# æ›´æ–°ç³»ç»Ÿ
sudo yum update -y

# å®‰è£… EPEL æº
sudo yum install epel-release -y

# å®‰è£… Node.js
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs

# å®‰è£…å¼€å‘å·¥å…·ï¼ˆç”¨äºç¼–è¯‘æŸäº› npm åŒ…ï¼‰
sudo yum groupinstall "Development Tools" -y

# å®‰è£… git
sudo yum install git -y

# å…¨å±€å®‰è£… PM2
sudo npm install pm2 -g
```

2. åˆ›å»ºé¡¹ç›®ç›®å½•ï¼š
```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /opt/projects
sudo chown -R $USER:$USER /opt/projects
cd /opt/projects
```

3. éƒ¨ç½²é¡¹ç›®ï¼š
```bash
# å…‹éš†é¡¹ç›®
git clone [é¡¹ç›®åœ°å€]
cd binance-volume-alert

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
vim .env  # æˆ–ä½¿ç”¨ nano .env

# æµ‹è¯•é…ç½®
node test-telegram.js

# ä½¿ç”¨ PM2 å¯åŠ¨æœåŠ¡
pm2 start src/index.js --name "binance-monitor"
pm2 start src/update.js --name "auto-updater"

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
sudo env PATH=$PATH:/usr/bin pm2 startup systemd -u $USER --hp $HOME
pm2 save
```

4. é˜²ç«å¢™é…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
```bash
# å¦‚æœä½¿ç”¨ firewalld
sudo firewall-cmd --permanent --add-port=80/tcp  # å¦‚æœéœ€è¦å¯¹å¤–æš´éœ²æœåŠ¡
sudo firewall-cmd --reload

# å¦‚æœä½¿ç”¨ iptables
sudo iptables -I INPUT -p tcp --dport 80 -j ACCEPT
sudo service iptables save
```

5. SELinux è®¾ç½®ï¼ˆå¦‚æœå¯ç”¨äº† SELinuxï¼‰ï¼š
```bash
# æŸ¥çœ‹ SELinux çŠ¶æ€
getenforce

# å¦‚æœéœ€è¦ï¼Œå¯ä»¥ä¸´æ—¶å…³é—­ SELinux
sudo setenforce 0

# æˆ–æ°¸ä¹…å…³é—­ï¼ˆéœ€è¦é‡å¯ï¼‰
sudo sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config
```

6. æ—¥å¿—æŸ¥çœ‹ï¼š
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
pm2 logs binance-monitor

# æŸ¥çœ‹æ›´æ–°æœåŠ¡æ—¥å¿—
pm2 logs auto-updater

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
sudo journalctl -u pm2-$USER
```

7. å¸¸è§é—®é¢˜å¤„ç†ï¼š
- å¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼š
```bash
# ç¡®ä¿é¡¹ç›®ç›®å½•æƒé™æ­£ç¡®
sudo chown -R $USER:$USER /opt/projects/binance-volume-alert

# ç¡®ä¿ .env æ–‡ä»¶æƒé™æ­£ç¡®
chmod 600 .env
```

- å¦‚æœ Node.js ç‰ˆæœ¬è¿‡ä½ï¼š
```bash
# åˆ é™¤æ—§ç‰ˆæœ¬
sudo yum remove nodejs

# é‡æ–°å®‰è£…æ–°ç‰ˆæœ¬
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs
```

### CentOS ç¯å¢ƒå˜é‡ä¿®æ”¹ä¸é‡å¯
1. ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼š
```bash
# ç¼–è¾‘ .env æ–‡ä»¶
vim /opt/projects/binance-volume-alert/.env

# ç¡®ä¿æ–‡ä»¶æƒé™æ­£ç¡®
chmod 600 .env
```

2. é‡å¯æœåŠ¡ï¼š
```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨ pm2 é‡å¯
pm2 restart binance-monitor
pm2 restart auto-updater

# æ–¹å¼äºŒï¼šåœæ­¢åé‡æ–°å¯åŠ¨
pm2 stop binance-monitor auto-updater
pm2 start binance-monitor auto-updater

# æŸ¥çœ‹æ˜¯å¦é‡å¯æˆåŠŸ
pm2 status

# æŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ˜¯å¦æ­£å¸¸è¿è¡Œ
pm2 logs binance-monitor
```

3. å¦‚æœé‡å¯åä»æœ‰é—®é¢˜ï¼š
```bash
# åˆ é™¤ pm2 è¿›ç¨‹å¹¶é‡æ–°å¯åŠ¨
pm2 delete binance-monitor auto-updater
cd /opt/projects/binance-volume-alert
pm2 start src/index.js --name "binance-monitor"
pm2 start src/update.js --name "auto-updater"

# ä¿å­˜æ–°çš„è¿›ç¨‹åˆ—è¡¨
pm2 save
```

## è‡ªåŠ¨æ›´æ–°
é¡¹ç›®åŒ…å«è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ï¼š
- æ¯å°æ—¶è‡ªåŠ¨æ£€æŸ¥ GitHub ä»“åº“æ›´æ–°
- å¦‚æœ‰æ›´æ–°è‡ªåŠ¨æ‹‰å–å¹¶é‡å¯æœåŠ¡
- å¯é€šè¿‡ `pm2 logs auto-updater` æŸ¥çœ‹æ›´æ–°æ—¥å¿—

## å¸¸ç”¨å‘½ä»¤
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs binance-monitor
pm2 logs auto-updater

# é‡å¯æœåŠ¡
pm2 restart binance-monitor

# åœæ­¢æœåŠ¡
pm2 stop binance-monitor
```

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿æœåŠ¡å™¨èƒ½è®¿é—® GitHubï¼ˆç”¨äºè‡ªåŠ¨æ›´æ–°ï¼‰
2. å¦‚æœä½¿ç”¨ä»£ç†ï¼Œç¡®ä¿ä»£ç†é…ç½®æ­£ç¡®
3. ç¡®ä¿ Telegram æœºå™¨äººå·²æ­£ç¡®é…ç½®å¹¶æœ‰å‘é€æ¶ˆæ¯æƒé™
4. é¦–æ¬¡éƒ¨ç½²å»ºè®®å…ˆè¿è¡Œæµ‹è¯•ï¼š`node test-telegram.js`

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-03-21)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®ç°åŸºæœ¬çš„äº¤æ˜“é‡å’Œä»·æ ¼ç›‘æ§åŠŸèƒ½
- æ·»åŠ  Telegram æé†’åŠŸèƒ½
- æ”¯æŒä»£ç†é…ç½®
- æ·»åŠ è‡ªåŠ¨æ›´æ–°åŠŸèƒ½

### v1.0.1 (2024-03-21)
- ä¼˜åŒ–å†…å­˜ä½¿ç”¨
  - å‡å°‘å†å²æ•°æ®å­˜å‚¨å¤§å°
  - ä¼˜åŒ–æ•°æ®ç»“æ„ï¼Œåªä¿å­˜å¿…è¦ä¿¡æ¯
  - å¢åŠ åŸºäºæ—¶é—´çš„æ•°æ®æ¸…ç†æœºåˆ¶
- æ”¹è¿›æ—¥å¿—è¾“å‡ºï¼Œå‡å°‘å†—ä½™ä¿¡æ¯

## è¾“å‡ºä¿¡æ¯è¯´æ˜

ç¨‹åºä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š
- ç›‘æ§çš„äº¤æ˜“å¯¹æ•°é‡
- ç¬¦åˆæ¡ä»¶çš„äº¤æ˜“å¯¹è¯¦ç»†ä¿¡æ¯ï¼š
  - äº¤æ˜“å¯¹åç§°
  - æ—¶é—´å¯¹æ¯”
  - æˆäº¤é‡å¯¹æ¯”
  - æˆäº¤é¢å¯¹æ¯”ï¼ˆUSDTï¼‰
  - ä»·æ ¼å¯¹æ¯”å’Œæ¶¨å¹…

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿æœ¬åœ°ç½‘ç»œèƒ½å¤Ÿè®¿é—®å¸å®‰ API
2. å¦‚æœä½¿ç”¨ä»£ç†ï¼Œç¡®ä¿ä»£ç†é…ç½®æ­£ç¡®
3. ç¡®ä¿ Telegram æœºå™¨äººå·²æ­£ç¡®é…ç½®å¹¶æœ‰å‘é€æ¶ˆæ¯æƒé™
4. ç¨‹åºéœ€è¦æŒç»­è¿è¡Œæ‰èƒ½å®æ—¶ç›‘æ§å¸‚åœº

## å¸¸è§é—®é¢˜

1. å¦‚æœæ— æ³•è¿æ¥å¸å®‰ APIï¼š
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤ä»£ç†é…ç½®æ˜¯å¦æ­£ç¡®
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—

2. å¦‚æœæ²¡æœ‰æ”¶åˆ° Telegram æé†’ï¼š
   - ç¡®è®¤æœºå™¨äºº token æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ chat ID æ˜¯å¦æ­£ç¡®
   - ä½¿ç”¨ test.js æµ‹è¯•æœºå™¨äººè¿æ¥

## æœåŠ¡å™¨æ›´æ–°è¯´æ˜

### CentOS æ›´æ–°æ­¥éª¤
1. è¿›å…¥é¡¹ç›®ç›®å½•ï¼š
```bash
cd /opt/projects/binance-volume-alert  # æˆ–ä½ çš„é¡¹ç›®ç›®å½•
```

2. æ‹‰å–æœ€æ–°ä»£ç ï¼š
```bash
git pull origin master
```

3. å¦‚æœæœ‰æ–°çš„ä¾èµ–ï¼Œå®‰è£…å®ƒä»¬ï¼š
```bash
npm install
```

4. é‡å¯æœåŠ¡ï¼š
```bash
pm2 restart binance-monitor
```

5. æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs binance-monitor
```

### å¸¸è§é—®é¢˜å¤„ç†
1. å¦‚æœæ‹‰å–ä»£ç æ—¶æœ‰å†²çªï¼š
```bash
# æ”¾å¼ƒæœ¬åœ°ä¿®æ”¹
git reset --hard HEAD
git pull origin master
```

2. å¦‚æœéœ€è¦å›æ»šåˆ°ä¹‹å‰ç‰ˆæœ¬ï¼š
```bash
# æŸ¥çœ‹æäº¤å†å²
git log --oneline -5

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
git reset --hard <commit_id>
pm2 restart binance-monitor
```

3. å¦‚æœæœåŠ¡å¯åŠ¨å¤±è´¥ï¼š
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
pm2 logs binance-monitor --lines 100
```

